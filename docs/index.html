<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="OBI commomly used functions including data processing, create rates, ggplot theme, etc.">
<title>OBI Internal Tool Package • obstinit</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="OBI Internal Tool Package">
<meta property="og:description" content="OBI commomly used functions including data processing, create rates, ggplot theme, etc.">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="index.html">obstinit</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="reference/index.html">Reference</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="obstinit">obstinit<a class="anchor" aria-label="anchor" href="#obstinit"></a>
</h1></div>
<div class="section level2">
<h2 id="background">Background<a class="anchor" aria-label="anchor" href="#background"></a>
</h2>
<p>Obstinit is our OBI “tools” package, meant to provide a series of tools we regularly use in data processing and visualization and to save time used on repetitive coding tasks.</p>
</div>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<p>Install the development version directly from GitHub:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># install.packages("devtools")</span></span>
<span><span class="fu">devtools</span><span class="fu">::</span><span class="fu"><a href="https://remotes.r-lib.org/reference/install_github.html" class="external-link">install_github</a></span><span class="op">(</span><span class="st">"obianalysts-umich/obstinit"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h2>
<div class="section level3">
<h3 id="reading-data">Reading data<a class="anchor" aria-label="anchor" href="#reading-data"></a>
</h3>
<ul>
<li>
<code><a href="reference/read_current_data.html">read_current_data()</a></code> reads the most recent (today’s) OBI registry data from the Turbo drive. This function does not take any arguments and is built to work with both Mac and PC operating systems.</li>
<li>
<code><a href="reference/read_crosswalk.html">read_crosswalk()</a></code> reads in the current crosswalk file from Turbo and cleans the column names. This function does not take any arguments.</li>
</ul>
</div>
<div class="section level3">
<h3 id="creating-obi-cohort">Creating OBI cohort<a class="anchor" aria-label="anchor" href="#creating-obi-cohort"></a>
</h3>
<ul>
<li>
<code><a href="reference/create_obi_cohort.html">create_obi_cohort()</a></code> limits an OBI nightly export dataset to locked, complete cases with a delivery date after 2019. Note that <code>case_lock_dt</code> is programmed to match what is in the AMx workstation and represents the LAST DAY a case can be edited by a hospital; the case LOCKS at midnight that night. Therefore, cases are considered locked when <code>case_lock_dt</code> &lt; <code><a href="https://lubridate.tidyverse.org/reference/now.html" class="external-link">today()</a></code>.</li>
<li>
<code><a href="reference/create_90_day_lock_dt.html">create_90_day_lock_dt()</a></code> doesn’t take any arguments but provides the date at which cases pulled on a given day will lock. Can be used with <code><a href="reference/create_obi_cohort.html">create_obi_cohort()</a></code>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="obi-measure-specs">OBI measure specs<a class="anchor" aria-label="anchor" href="#obi-measure-specs"></a>
</h3>
<ul>
<li>The <code>create_*_cohort()</code> family of functions limits the dataset to denominator criteria based on the measure of interest (Cat II, IA)</li>
<li>The <code>calculate_*_comp()</code> family of functions calculates compliance with OBI measures (usually P4P scorecard measures) for Cat II, IA, TeamBirth, and Labor Dystocia. For dystocia compliance, individual types can be added by using <code>include_types == T</code>.</li>
</ul>
</div>
<div class="section level3">
<h3 id="plotting">Plotting<a class="anchor" aria-label="anchor" href="#plotting"></a>
</h3>
<ul>
<li>
<code><a href="reference/create_ctrl_df.html">create_ctrl_df()</a></code> creates a data frame containing the numerator, denominator, rate, CL (center line) UCL (upper control limit) and LCL (lower control limit) for a variable of interest (ex. Cesarean). The dataset is limited to complete cases; additional date or other constraints must be added manually. To use this function with <code><a href="reference/plot_ctrl_hchart.html">plot_ctrl_hchart()</a></code>, set <code>for_highchart == T</code>. This function used to be called <code><a href="reference/structure_data.html">structure_data()</a></code>.</li>
<li>
<code><a href="reference/plot_ctrl_chart.html">plot_ctrl_chart()</a></code> takes the data frame constructed by <code><a href="reference/structure_data.html">structure_data()</a></code> and plots it using ggplot2. Plot title, axis titles, and caption must be added manually.</li>
<li>
<code><a href="reference/plot_ctrl_hchart.html">plot_ctrl_hchart()</a></code> is identical to the <code><a href="reference/plot_ctrl_chart.html">plot_ctrl_chart()</a></code> function, except that it formats everything to be used with the <code>highchart</code> rather than <code>ggplot2</code> package.</li>
<li>
<code><a href="reference/create_caterpillar_df.html">create_caterpillar_df()</a></code> structures data for caterpillar (ranking) plots; each row of the data frame is a site name by default and the data frame includes a numerator, denominator, rate, and (0-1 bounded) 95% CI.</li>
<li>
<code><a href="reference/plot_caterpillar_chart.html">plot_caterpillar_chart()</a></code> plots a caterpillar chart, presumably using the dataframe created by <code><a href="reference/create_caterpillar_df.html">create_caterpillar_df()</a></code>. Plot title, axis titles, and caption must be added manually.</li>
<li>
<code><a href="reference/theme_obi.html">theme_obi()</a></code> is a ggplot2 theme that standardizes formatting of plots for semi-annual meetings, presentations, and more. It uses <code><a href="https://ggplot2.tidyverse.org/reference/ggtheme.html" class="external-link">theme_minimal()</a></code> as a base and additionally centers the plot title and subtitle, left-justifies the plot caption, standardizes text sizes across the plot, and makes all text OBI’s dark blue. All OBI plots should use this theme.</li>
</ul>
</div>
<div class="section level3">
<h3 id="other-data-processing">Other data processing<a class="anchor" aria-label="anchor" href="#other-data-processing"></a>
</h3>
<ul>
<li>
<code><a href="reference/sort_muti_selection_var.html">sort_muti_selection_var()</a></code> takes in variable name and sort multiple selection values. For example sort {10,5,3,4} to {3,4,5,10}. use <code><a href="reference/sort_muti_selection_var.html">?sort_muti_selection_var</a></code> to see examples to run.</li>
<li>
<code>add_CI_values</code>: This function creates upper and lower CI for an observed rate. Two new variables (<code>LC</code> and <code>UC</code>) are added. use <code><a href="reference/add_CI_values.html">?add_CI_values</a></code> to see examples to run.</li>
</ul>
</div>
</div>
<div class="section level2">
<h2 id="example-workflow---reading-in-data-structuring-data-and-plotting-control-chart-in-ggplot">Example workflow - reading in data, structuring data, and plotting control chart in ggplot<a class="anchor" aria-label="anchor" href="#example-workflow---reading-in-data-structuring-data-and-plotting-control-chart-in-ggplot"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://obianalysts-umich.github.io/obstinit/">obstinit</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://tidyverse.tidyverse.org" class="external-link">tidyverse</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">obi</span> <span class="op">=</span> <span class="fu"><a href="reference/read_current_data.html">read_current_data</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">obi_cohort</span> <span class="op">=</span> <span class="va">obi</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/create_obi_cohort.html">create_obi_cohort</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ctrl_cohort</span> <span class="op">=</span> <span class="va">obi_cohort</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/create_ctrl_df.html">create_ctrl_df</a></span><span class="op">(</span><span class="va">infant_dob_dt</span>,</span>
<span>                 <span class="va">overall_dystocia_compliance_num</span>, </span>
<span>                 <span class="va">overall_dystocia_den_all</span>, </span>
<span>                 date_gran <span class="op">=</span> <span class="st">"quarter"</span>,</span>
<span>                 increase_is_bad <span class="op">=</span> <span class="cn">F</span><span class="op">)</span></span>
<span></span>
<span><span class="va">ctrl_chart</span> <span class="op">=</span> <span class="va">ctrl_cohort</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span> </span>
<span>  <span class="fu"><a href="reference/plot_ctrl_chart.html">plot_ctrl_chart</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="status-updates">Status updates<a class="anchor" aria-label="anchor" href="#status-updates"></a>
</h2>
<ul>
<li>12/6/2023 - obstinit is fully functional and is considered to be in a finalized format. New functions are added as needed. Package is in maintenance phase and status updates will no longer be posted unless major changes are made.</li>
<li>9/19/2023 - added <code>read_current_data</code>
</li>
<li>8/7/2023 - added <code><a href="reference/calculate_dys_comp.html">calculate_dys_comp()</a></code>
</li>
<li>5/23/2023 - <code><a href="reference/create_90_day_lock_dt.html">create_90_day_lock_dt()</a></code> and <code><a href="reference/create_obi_cohort.html">create_obi_cohort()</a></code> are live</li>
<li>5/19/2023 - <code><a href="reference/plot_ctrl_hchart.html">plot_ctrl_hchart()</a></code> is live</li>
<li>5/10/2023 - color legend fix added to plot_ctrl_chart</li>
<li>4/5/2023 - Added color gradient and new OBI colors to <code><a href="reference/plot_ctrl_chart.html">plot_ctrl_chart()</a></code>. Note that there is still some debugging that needs to be done, primarily in regards to the color legend which is often incorrect.</li>
<li>3/29/2023 - <code><a href="reference/plot_ctrl_chart.html">plot_ctrl_chart()</a></code> function is usable.</li>
<li>3/28/2023 - <code><a href="reference/structure_data.html">structure_data()</a></code> function is usable.</li>
<li>3/23/2023 - under construction</li>
</ul>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li><a href="LICENSE.html">Full license</a></li>
<li><small><a href="https://opensource.org/licenses/mit-license.php" class="external-link">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a></small></li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing obstinit</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Thea B <br><small class="roles"> Author, maintainer </small>  </li>
<li>Xilin Chen <br><small class="roles"> Author </small>  </li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Thea B, Xilin Chen.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
